<!-- Overview: Calling an existing endpoint.  In this case, the Libary of Congress website.
    For more info see:
        https://www.w3schools.com/html/html_css.asp
    -->

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script src="https://code.jquery.com/jquery-3.2.0.min.js"></script>
    <!-- Step 5.10:  Add a title, in this case, call it "Library of Congress" -->
    <!-- Student: Insert Code Here -->
</head>
<body>

    <!-- Step 5.20:  Give the input box a default value of "Migrant Mother. Dorothea Lange" -->
    <!-- Student: Insert Code Here -->

    <!-- Step 5.30: tie into the onclick event, and call the function "loadRemoteLOC" -->
    <!-- Student: Insert Code Here -->

    <table border="1" id="resultsTable">
        <tr>
            <th>date</th>
            <th>title</th>
            <th>thumb</th>
        </tr>
    </table>

    <script>
        function addRowToTable(item) {
            var row = $("<tr />")
            $("#resultsTable").append(row); //this will append tr element to table... keep its reference for a while since we will add cels into it
            row.append($("<td>" + item.created_published_date + "</td>"));
            row.append($("<td>" + "<a target='_blank' href='" + item.links.item + "'>" + item.title + "</a>" + "</td>"));
            row.append($("<td>" + "<a target='_blank' href='" + item.links.resource + "'>" + '<img src="' + item.image.square + '" />' + "</a>" + "</td>"));
        }

        function loadData(data) {
            $("#resultsTable tr:gt(0)").remove();
            //alert("AAAA" + JSON.stringify(data, null, "  "))
            var list = data.results;
            for (var i = 0; i < list.length; i++) {
                var item = list[i];
                addRowToTable(item);
            }
        }
        /* Step 5.40: Call the loadRemoteLOC function (in order to initialize when the page loads)  */
        // Student: Insert Code Here

        /* Step 5.50: Define the loadRemoteLOC function that will pass the search information to an ajax call.  Upon returning, the loadData will be called with the returned data. */
        function loadRemoteLOC() {
            /*  Step 5.51: Using JQuery get the value in the search box */
            var search = // Student: Insert Code Here
            /*  Step 5.60: Using JQuery ajax, call the url 'http://www.loc.gov/pictures/search/' */
            /*  Step: Pass the following in the data element:
                 { fo: 'json', at: 'results', query: search }
            */
            /* Step 5.61: Call the url and pass the data element to get results */
            $.ajax({
                type: 'get',
                url: // Student: Insert Code Here
                dataType: 'jsonp',
                data: {
                    // Student: Insert Code Here
                },
                /*  Step 5.62: add a 'success' function that gets passed in the response data, then calls loadData with the value */
                success: function (response) {
                    // Student: Insert Code Here
                },
                error: function (errorObject) {
                    alert("error: " + errorObject.responseText)
                }
            })
        }
    </script>
</body>
</html>
